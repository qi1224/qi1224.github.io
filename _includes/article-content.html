{% assign without-image = nil %}
<!-- Set a default state indicating the post has a cover image -->

<!-- begin article -->
<div class="article">
  <div class="container">
    <div class="article__wrapper">

      {% if post.image %}
        <!-- Display post cover image as a background-image block -->
        <a href="{{ post.url | prepend: site.baseurl }}"
           class="article__image"
           style="background-image: url({{ site.baseurl }}/images/{{ post.image }})">
        </a>
      {% else %}
        <!-- Mark layout style when the post has no image -->
        {% assign without-image = 'article-without-image' %}
      {% endif %}

      <div class="article__content {{ without-image }}">
        <!-- Main text area, class changes when image is missing -->

        <div class="article-tags">
          {% if post.tags.size >= 1 %}
            <!-- Loop through all tags and generate tag links -->
            <div class="article-tags__box">
              {% for tag in post.tags %}
                <a href="{{ site.baseurl }}/tag/{{ tag | downcase | replace: " ", "-" }}"
                   class="article__tag">{{ tag }}</a>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <h2 class="article__title">
          <!-- Post title linking to full article -->
          <a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
        </h2>

        <p class="article__excerpt">
          <!-- Use description if available; otherwise auto-generated excerpt -->
          {% if post.description %}
            {{ post.description }}
          {% else %}
            {{ post.content | strip_html | truncate: 185 }}
          {% endif %}
        </p>

        <div class="article__footer">
          <div class="article__meta">
            <span class="article__date">
              <!-- Formatted publication date -->
              <time datetime="{{ post.date | date_to_xmlschema }}">
                {% assign date_format = site.minima.date_format | default: "%B %-d, %Y" %}
                {{ post.date | date: date_format }}
              </time>
            </span>
          </div>

          <!-- Button linking to full article -->
          <a href="{{ post.url | prepend: site.baseurl }}" class="read-more">
            Keep Reading <i class="ion ion-ios-arrow-forward"></i>
          </a>
        </div>

      </div> <!-- article__content -->

    </div>
  </div>
</div>
<!-- end article -->
